{"apiVersion": "v1", "data": {"fluent-bit.conf": "[SERVICE]\n    Daemon Off\n    Log_Level error\n    Parsers_File /fluent-bit/etc/parsers.conf\n    HTTP_Server On\n    HTTP_Listen 0.0.0.0\n    HTTP_Port 2020\n    Health_Check On\n\n#\n# CPU pipeline\n#\n\n[INPUT]\n    name cpu\n    tag  cpu\n    interval_sec 1\n\n#\n# Kubernetes pipeline\n#\n\n[INPUT]\n    Name tail\n    Path /var/log/containers/*.log\n    multiline.parser cri\n    Tag kube.*\n    Mem_Buf_Limit 50MB\n    Skip_Long_Lines On\n[FILTER]\n    Name kubernetes\n    Match kube.*\n    Merge_Log On\n    Keep_Log Off\n    K8S-Logging.Parser On\n    K8S-Logging.Exclude On\n# Rewrite if logs match NGINX.\n[FILTER]\n    Name rewrite_tag\n    Match kube.*\n    Rule $message ^[\\d\\.]+\\s-\\s[\\w\\-]+\\s[\\[\\w\\d\\/:\\s+\\]]+\\s\"(HEAD|POST|GET|PUT|DELETE)\\s[\\d\\w\\/\\.\\=\\?\\-]*\\s(HTTP)\\/\\d\\.\\d\"\\s\\d{3}\\s\\d+\\s\"[\\w\\d\\.\\-\\/]+\"\\s\"[\\w\\d\\.\\-\\/\\s()]*\"\\s\\d+\\s[\\d\\.]+\\s\\[[\\d\\w\\-]*\\]\\s\\[[\\d\\w\\-]*\\]\\s[\\w\\d\\-\\/\\.:]+\\s[\\d\\-]+\\s[\\d\\-\\.]+\\s[\\d\\-]+\\s[\\d\\w]*$ logs.ingress-nginx false\n[FILTER]\n    Name parser\n    Match logs.ingress-nginx\n    Key_Name message\n    Parser nginx\n    Reserve_Data true\n[OUTPUT]\n    Match logs.ingress-nginx\n    tls On\n    tls.ca_file /certs/ca.pem\n    tls.crt_file /certs/crt.pem\n    tls.key_file /certs/key.pem\n    Name opensearch\n    Host opensearch-cluster-headless.opensearch.svc.cluster.local\n    Buffer_Size 512KB\n    Logstash_Format On\n    Logstash_Prefix ingress-nginx-logs\n    Replace_Dots On\n    Suppress_Type_Name On\n    Trace_Error true\n[OUTPUT]\n    Match kube.*\n    tls On\n    tls.ca_file /certs/ca.pem\n    tls.crt_file /certs/crt.pem\n    tls.key_file /certs/key.pem\n    Name es\n    Host opensearch-cluster-headless.opensearch.svc.cluster.local\n    Logstash_Format On\n    Replace_Dots On\n    Suppress_Type_Name On\n    Trace_Error true\n\n#\n# Host pipeline\n#\n\n[INPUT]\n    Name systemd\n    Tag host\n    Systemd_Filter _SYSTEMD_UNIT=kubelet.service\n    Read_From_Tail On\n[OUTPUT]\n    Match host\n    tls On\n    tls.ca_file /certs/ca.pem\n    tls.crt_file /certs/crt.pem\n    tls.key_file /certs/key.pem\n    Name es\n    Host opensearch-cluster-headless.opensearch.svc.cluster.local\n    Logstash_Format On\n    Logstash_Prefix node\n    Replace_Dots On\n    Suppress_Type_Name On\n    Trace_Error true\n"}, "kind": "ConfigMap", "metadata": {"name": "fluent-bit", "namespace": "fluent-bit"}}